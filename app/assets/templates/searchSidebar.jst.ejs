<% var selected = function (value) {
  if (search_default === value) {
    return "selected"
    }
} %>

<% var tagField = function (tagName) {
  var tagList = ""
  if (topTags[tagName]) {
    _(topTags[tagName]).each(function(tag){
      tagList = tagList + "<input class='form-control' type='checkbox' value='" + tag[0] +
      "' name='tags[" + tagName + "][]'><div>" + tag[0] + "</div>"
    })
  }
  return tagList
} %>

<input type="submit" class="sort-and-filter btn btn-primary" value="Sort And Filter">
<p>
<select name="sort_criterion">
  <option value="updated_at" <%= selected("updated_at") %>>Date Updated</option>
  <option value="created_at" <%= selected("created_at") %>>Date Posted</option>
  <option value="word_count" <%= selected("word_count") %>>Word Count</option>
  <option value="title" <%= selected("title") %>>Title</option>
  <option value="author_name" <%= selected("author_name") %>>Author</option>
  <option value="kudos" <%= selected("kudos") %>>Kudos</option>
  <option value="hits" <%= selected("hits") %>>Hits</option>
</select>
<p>

<div class="form-group">
  <label for="author_name">Author</label><br />
  <input class="form-control" type="text" name="author_name" id="author_name">
</div>
<div class="form-group">
  <label for="fandom_name">Fandom</label><br />
  <input class="form-control" type="text" name="fandom_name" id="fandom_name">
</div>

<div class="form-group">
  <label for="Ratings">Ratings</label><br />
  <input class="form-control" type="radio" name="tags[Ratings][]" value="all">All Ratings</option>
  <input class="form-control" type="radio" name="tags[Ratings][]" value="unrated">Unrated</option>
  <input class="form-control" type="radio" name="tags[Ratings][]" value="general">General Audiences</option>
  <input class="form-control" type="radio" name="tags[Ratings][]" value="teen">Teen And Up Audiences</option>
  <input class="form-control" type="radio" name="tags[Ratings][]" value="mature">Mature</option>
  <input class="form-control" type="radio" name="tags[Ratings][]" value="explicit">Explicit</option>
</div>

<div class="form-group">
  <label for="Warnings">Warnings</label>
  <input class="form-control" type="checkbox" value="Creator Chose Not To Use Archive Warnings"
    name="tags[Warnings][]" id="chose_not_to">
  Creator Chose Not To Use Archive Warnings
  <input class="form-control" type="checkbox" value="No Archive Warnings Apply" name="tags[Warnings][]"
    id="none_apply">No Archive Warnings Apply
  <input class="form-control" type="checkbox" value="Graphic Depictions of Violence"
    name="tags[Warnings][]" id="violence">Graphic Depictions of Violence
  <input class="form-control" type="checkbox" value="Major Character Death" name="tags[Warnings][]"
    id="death">Major Character Death
</div>

<div class="form-group">
  <label for="Categories">Categories</label><br />
  <input class="form-control" type="radio" name="tags[Categories][]" value="all">All Categories
  <input class="form-control" type="radio" name="tags[Categories][]" value="British">British
  <input class="form-control" type="radio" name="tags[Categories][]" value="American">American
  <input class="form-control" type="radio" name="tags[Categories][]" value="Russian">Russian
  <input class="form-control" type="radio" name="tags[Categories][]" value="French">French
  <input class="form-control" type="radio" name="tags[Categories][]" value="German">German
  <input class="form-control" type="radio" name="tags[Categories][]" value="Other">Other
</div>

<div class="form-group">
  <label for="Characters">Characters</label>
  <%= tagField("Characters") %>
</div>
<div class="form-group">
  <label for="Relationships">Relationships</label>
  <%= tagField("Relationships") %>
</div>
<div class="form-group">
  <label for="Additional">Additional Tags</label>
  <%= tagField("Additional") %>
</div>

<label for="autocomplete">Other Tags</label>
<div class='tags-div'></div>
<input class="form-control" type='text' id='autocomplete' class='add-tag' name="otherTags">

<input type="submit" class="sort-and-filter btn btn-primary" value="Sort And Filter">
